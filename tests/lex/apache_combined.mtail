




counter
apache_http_requests_total
by
request_method
http_version
request_status

counter
apache_http_bytes_total
by
request_method
http_version
request_status


/^/
+

/(?P<hostname>[0-9A-Za-z\.:-]+) /
+

/(?P<remote_logname>[0-9A-Za-z-]+) /
+

/(?P<remote_username>[0-9A-Za-z-]+) /
+

/\[(?P<timestamp>\d{2}\/\w{3}\/\d{4}:\d{2}:\d{2}:\d{2} (\+|-)\d{4})\] /
+

/"(?P<request_method>[A-Z]+) (?P<URI>\S+) (?P<http_version>HTTP\/[0-9\.]+)" /
+

/(?P<request_status>\d{3}) /
+

/((?P<response_size>\d+)|-) /
+

/"(?P<referer>\S+)" /
+

/"(?P<user_agent>[[:print:]]+)"/
+

/$/
{

strptime
$timestamp
"02/Jan/2006:15:04:05 -0700"


apache_http_requests_total[$request_method][$http_version][$request_status]++

$response_size
>
0
{

apache_http_bytes_total[$request_method][$http_version][$request_status]
+=
$response_size

}

}

